; lab5.asm - Программа на языке ассемблера NASM
; Запрашивает ввод строки от пользователя и выводит её обратно

SECTION .data
    prompt: DB 'Введите строку:', 10 ; Сообщение перед вводом
    promptLen: EQU $-prompt          ; Длина сообщения

SECTION .bss
    buffer: RESB 80                  ; Буфер для ввода строки (80 байт)

SECTION .text
    GLOBAL _start

_start:
    ; Вывод сообщения
    mov eax, 4          ; Код функции записи (sys_write)
    mov ebx, 1          ; Описатель файла: stdout
    mov ecx, prompt     ; Указатель на строку сообщения
    mov edx, promptLen  ; Длина строки сообщения
    int 80h             ; Вызов системного прерывания

    ; Чтение ввода пользователя
    mov eax, 3          ; Код функции чтения (sys_read)
    mov ebx, 0          ; Описатель файла: stdin
    mov ecx, buffer     ; Указатель на буфер для ввода
    mov edx, 80         ; Максимальная длина ввода
    int 80h             ; Вызов системного прерывания

    ; Вывод введённой строки
    mov eax, 4          ; Код функции записи (sys_write)
    mov ebx, 1          ; Описатель файла: stdout
    mov ecx, buffer     ; Указатель на буфер
    mov edx, 80         ; Длина строки (макс.)
    int 80h             ; Вызов системного прерывания

    ; Завершение программы
    mov eax, 1          ; Код функции выхода (sys_exit)
    mov ebx, 0          ; Код завершения программы
    int 80h             ; Вызов системного прерывания
